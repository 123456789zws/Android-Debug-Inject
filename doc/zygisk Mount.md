zygisk Mount 需要注意的问题



### root工具挂载
目前以magisk模块整体的设计来看，magisk模块，以及模块挂载路径，包括magisk模块实现的zyigisk,他们其实是一个配套的存在。
由于目前的各个root都提供了Magisk的模块功能，并且模块安装路路径跟原始maigsk模块所在的路径是一样的，这还不包括其他一个root工具自身挂载的一些特定路径。
zygisk检测工具会根据挂载路径进行检测，并且会针对各个root工具的所有挂载进行检测。在这种情况下，就需要对挂载路径进行处理。
magisk 的root环境，拥有自带的zygisk来处理他的挂载路径，但是别的root工具，都是使用第三方zygisk，他们没有自己配套的zygisk.
所以各个root工具的目录卸载重任就落到第三方的zygisk上了，这就导致第三方zygisk需要兼容一些root工具的目录隐藏。


### zygisk 辅助实现root获取

root工具有一个授予应用root的功能，可以让应用直接调用su,然后获取root权限，对于kernelsu来说，不存在su文件或者路径的挂载问题，但是对于别的通过su文件获取root的root工具，
这需要su文件在这个授予了root权限的应用的命名空间内，才能调用，否则命名空间不可能见，是无法调用的。为什么会这样，因为需要防止应用对su文件进行检测，所以，不授权的应用会将su文件相关的挂载删除。
所以zygisk工具还需要对给予root权限的应用，不卸妆su相关的命名空间

### zygisk 模块启用
对于root工具挂载的相关模块目录，我们前面给说了，为了防止检测也会针对性的进行卸载，所以，如果一个zygisk模块在应用进程中一直启用并且不卸载，那么也需要对命名空间放行。




### 各个模块卸载命名空间的差异

有不少第三法zygisk，我也是参考别人的代码实现的，有些zygisk是在每个进程启动的进行进程的命名空间卸载，有些zygisk是在第一次zygote启动以后直接先进行全局卸载，后续启动的应用在根据是会否需要进行命名空间挂载。